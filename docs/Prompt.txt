You are an expert PHP framework developer. I want you to help me build a simple but secure and reusable PHP framework from scratch. The framework should be lightweight, modular, and scalable. Write production-quality PHP code with security and performance in mind.
The framework must include:
1. Custom Routing System
   * Map routes to controllers and actions.
   * Support GET, POST, PUT, DELETE methods.
2. Controllers
   * Base Controller class.
   * Ability to return views or JSON responses.
3. Layouts and Views
   * A simple templating system for layouts and views.
   * Escape output by default for security.
4. Models
   * Base Model class.
   * Database connection handling.
   * Secure query execution.
5. Request Processing
   * Handle GET, POST, and JSON request payloads securely.
   * Provide access to sanitized inputs.
6. Validations and Sanitization
   * Built-in validation methods.
   * Automatic sanitization of user input.
   * Prepared statements for SQL queries.
7. Middlewares
   * Support global and route-level middlewares.
   * Example: authentication, CSRF, rate limiting.
8. Simple Active Record Implementation
   * Ability to define models tied to tables.
   * CRUD operations with prepared statements.
9. Helper Functions
   * Common utilities like URL generation, redirect, session management, etc.
10. Simple ORM
* Abstract database operations to objects.
* Example: User::find(1) or User::where('email', $email)->first().
1. Reusable/Installable Core
* The framework core should be installable and reusable in multiple projects.
* Organized folder structure (e.g., app/, core/, routes/, views/, public/).
Important Guidelines:
* Always use prepared statements for database queries.
* Escape all output in views by default.
* Follow modern PHP 8+ standards (PSR-4 autoloading, namespaces).
* Keep the code simple, readable, and extensible.
* Provide inline comments explaining important parts.
* Include a step-by-step example showing how to define routes, controllers, models, and views.
Your task: Generate the full framework code with explanations and usage examples. The output should be structured so I can copy it into folders and run it immediately.